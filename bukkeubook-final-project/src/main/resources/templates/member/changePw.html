<!doctype html>
<html xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
  <head>
  	<title>LOGIN</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet"  th:href="@{/css/main/login/login.css}">
  </head>
  <body>
    <div class="login_img">
      <a href="/member/login"><img src="/images/main/login/mainImage.png" alt=""></a>
    </div>
    <div class="wrap">
      <div class="login">
        <form action="/member/changePw" method="post"><!-- 액션바꿈 -->
          <div class="login_input">
            <div class="login_id">
              <h4>사번</h4>
              <input type="text" name="username" id="" placeholder="사번">
            </div>
			
            <div class="login_pw">
              <h4>비밀번호</h4>
              <input type="password" name="password1" id="" placeholder="Password">
            </div>
            
            <div class="login_pw">
              <h4>변경 할 비밀번호</h4>
              <input type="password" name="password2" id="" placeholder="변경 할 비밀번호">
            </div>
			
			<div class="login_pw">
              <h4>비밀번호 확인</h4>
              <input type="password" name="password3" id="" placeholder="비밀번호 확인">
            </div>
			
            <div class="login_submit">
              <input class="loginBtn" type="submit" name="" id="" value="변경하기">
            </div>
          </div>
        </form>
      </div>
    </div>
    <script>
	    const notMatched = "[[${notMatched}]]";
	    const fail = "[[${fail}]]";
	    console.log(notMatched);
	    console.log(fail);
	    if(notMatched == "정보조회실패"){
				Swal.fire({
	                icon: 'warning',
	                title: '변경 실패!',
	                text: '입력하신 회원정보에 일치하는 회원이 없습니다.',
	            })
			}
	    if(fail == "실패"){
	    	Swal.fire({
                icon: 'warning',
                title: '변경 실패!',
                text: '변경 할 비밀번호와 비밀번호 확인값이 다릅니다.',
            })
	    }
	    const updateSuccessMessage = "[[${updateSuccessMessage}]]";
	    console.log(updateSuccessMessage);
			if(updateSuccessMessage == "성공"){
				Swal.fire({
	                icon: 'success',
	                title: 'Success!',
	                text: '비밀번호 변경이 성공적으로 완료되었습니다!',
	            }).then(function(){
	            	location.href="/member/login";
	            })
			}
    </script>
  </body>
</html>