<!DOCTYPE html>

<html xmlns:th="http://www.thymleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet"  th:href="@{/css/finance/tradeRegist.css}">
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
</head>
  <body>
		<div th:replace="/common/topSideBar.html"></div>

        <h2 class="mb-4" id="main-text">거래내역 관리</h2>
        <hr><br><br>
        <h5 class="mb-4" id="sub-text">거래내역 등록</h5>
        <br>

        <!-- 이곳부터 화면구현 시작(샘플 테이블 지우고 구현 시작하시면 됩니다.) -->
        <div id="textTable" style="text-align:-webkit-center">
        	<form id="registForm" action="/trade/regist" method="post">
	            <table id="sampleTable" align="center">
	                <tr>
	                    <td>거래일자</td>
	                    <td><input type="date" name="tlDate" required></td>
	                </tr>
	                <tr>
	                    <td>도서번호</td>
	                    <td>
	                    	<input type="text" id="bkNo" name="bkNo" disabled required>
	                    	<input type="hidden" id="bkNo1" name="bkNo">
	                    	<button class="btn" onclick="popupForBook()" type="button">검색</button>
	                    </td>
	                </tr>
	                <tr>
	                    <td>도서수량</td>
	                    <td><input type="number" name="tlAmount" min="1" value="1" required></td>
	                </tr>
	                <tr>
	                    <td>거래처번호</td>
	                    <td>
	                    	<input type="text" id="cntNo" name="cntNo" disabled required>
	                    	<input type="hidden" id="cntNo1" name="cntNo">
	                    	<button class="btn" onclick="popupForClient()" type="button">검색</button>
	                    </td>
	                </tr>
	                <tr>
	                    <td>상세내용</td>
	                    <td>
	                    	<input type="text" name="tlDetail">
	                    </td>
	                </tr>
	            </table>
                <button class="btn" type="button" onclick="checkComplete()">등록</button>
	            <button class="btn" type="button" onclick="checkCancel()">취소</button>
        	</form>
    </div> <!------------------------ 본문 종료---------------------------->

    <script th:inline="javascript">
        function popupForClient(){
            var url = "/trade/clientPopup";
            var name = "client_search";
            var option = "width = 1000, height = 600, top = 100, left = 200, location = no"
            window.open(url, name, option);
        }

        function popupForBook(){
            var url = "/trade/bookPopup";
            var name = "book_search";
            var option = "width = 1000, height = 600, top = 100, left = 200, location = no"
            window.open(url, name, option);
        }

        function addClient(cntNo){
            $("#cntNo").val(cntNo);
            $("#cntNo1").val(cntNo);
        }

        function addBook(bkNo){
            $("#bkNo").val(bkNo);
            $("#bkNo1").val(bkNo);
        }

        function checkComplete(){
        	  Swal.fire({
            		icon: 'warning',
            		title: '등록 확인',
            		text: '거래내역 등록을 진행하시겠습니까?',
            		showCancelButton: true,
            		confirmButtonText: '확인',
            		cancelButtonText: '취소'
            	}).then((result) => {
            		if(result.isConfirmed){
            			$("#registForm").submit();
            		}
            	});
          }
          
          function checkCancel(){
        	  Swal.fire({
      	      		icon: 'warning',
      	      		title: '취소 확인',
      	      		text: '정말로 거래내역 등록을 취소하시겠습니까?',
      	      		showCancelButton: true,
      	      		confirmButtonText: '확인',
      	      		cancelButtonText: '취소'
      	      	}).then((result) => {
      	      		if(result.isConfirmed){
      	      			location="/trade/select"
      	      		}
      	      	});
          }
    </script>
  </body>
</html>