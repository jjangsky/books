<!DOCTYPE html>

<html xmlns:th="http://www.thymleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet"  th:href="@{/css/books/bookList/bookList.css}">
	<link rel="stylesheet"  th:href="@{/css/books/order/orderDetail.css}">
</head>
<body>

        <div class="aboveTable">
            <div>
                <h1 align="center">도서 검색</h1>
            </div>
            <div class="searchBar">
                <form action="GET">
                    <input type="search">
                    <button type="submit">검색</button>
                </form>
            </div>
        </div>

        <br>
        <table id="searchTable">
            <tr>
                <th class="th1">도서 번호</th>
                <th class="th1">도서명</th>
                <th class="th1">저자</th>
                <th class="th1">출판사</th>
                <th class="th1">가격</th>
                <th class="th1">발행일</th>
                <th class="th1"></th>
            </tr>
            <tr class="tr1" th:each="book : ${ bookList }">
	               <td th:text="${ book.no }"></td>
	               <td th:text="${ book.name }"></td>
	               <td th:text="${ book.author }"></td>
	               <td th:text="${ book.pub }"></td>
	               <td th:text="${ book.price }"></td>
	               <td th:text="${ book.pubDate }"></td>
	               <td><button class="btn" type="button">선택</button></td>
               </tr>
        </table>
		<div th:replace="/finance/bookPopupPaging.html"></div>
  <script src="../js/jquery.min.js"></script>
  <script src="../js/popper.js"></script>
  <script src="../js/bootstrap.min.js"></script>
  <script src="../js/main.js"></script>
  <script th:inline="javascript">
        $(".btn").click(function(){ 

			var bookInfo = new Array();
			var checkBtn = $(this);
			
			// checkBtn.parent() : checkBtn의 부모는 <td>이다.
			// checkBtn.parent().parent() : <td>의 부모이므로 <tr>이다.
			var tr = checkBtn.parent().parent();
			var td = tr.children();
			
			console.log("클릭한 Row의 모든 데이터 : "+tr.text());
			
			var bkNo = td.eq(0).text();
			
			console.log(bkNo);

            window.opener.addBook(bkNo);

            window.close();
		});
  </script>
</body>
</html>