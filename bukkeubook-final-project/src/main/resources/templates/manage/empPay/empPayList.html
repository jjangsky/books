<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
  <head>
     <title>급여 계산내역 조회</title>
    <meta charset="utf-8">
      <link th:href="@{/css/manage/employee/HR.css}" rel="stylesheet">
      <link th:href="@{/css/manage/employee/Listdetail.css}" rel="stylesheet">
      <link rel="stylesheet"  th:href="@{/css/books/bookList/bookList.css}">
  </head>
<body>
	<div th:replace="/common/topSideBar.html"></div>
	<script>
		const successMessage = "[[${ message }]]";
		if(successMessage){
			 Swal.fire({
	                icon: 'success',
	                title: '성공!',
	                text: '성공적으로 완료되었습니다!',
	            })
		}
	</script>
	 <h2 class="mb-4" id="main-text">급여관리</h2>
        <hr><br><br>
        <h5 class="mb-4" id="sub-text">급여 계산내역 조회</h5>
        <br>
        <div class="search">
          <form action="/empPay/empPayList" method="get">
            <button class="search btn" type="submit">검색</button>
            <input type="hidden" name="currentPage" value="1">
            <input type="search" id="inputFind" name="searchValue" th:value="${selectCriteria.searchValue}" class="search in">
            <select class="search select" th:with="searchCondition = ${selectCriteria.searchCondition}"  id="searchCondition" name="searchCondition">
            <option value="select">분류</option>
              <option value="salMonth" th:selected="${ searchCondition } == 'salMonth'">지급월</option>
<!--           <option value="empName" th:selected="${ searchCondition } == 'empName'">사원이름</option>  -->
           </select>
         </form>
       </div>
<!--        <select class="search select" required>
              <option value="month">월</option>
              <option value="jan">1월</option>
              <option value="feb">2월</option>
              <option value="mar">3월</option>
              <option value="apr">4월</option>
              <option value="may">5월</option>
              <option value="jun">6월</option>
              <option value="jul">7월</option>
              <option value="aug">8월</option>
              <option value="sep">9월</option>
              <option value="oct">10월</option>
              <option value="nov">11월</option>
              <option value="dec">12월</option>
            </select> -->

        <div id="textTable" style="text-align:-webkit-center">
          <table id="sampleTable">
            <thead>
              <tr class="th1">
               	<th>지급월</th>
               	<th>부서명</th>
                <th>사원명</th>
                <th>기본급</th>
                <th>공제총액</th>
                <th>차인지급액</th>
                <th>상세</th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="pay : ${ payList }" class="hover">
              	<td th:text="${ pay.salMonth }"></td>
             	<td th:text="${ pay.empAndDept.dept.deptName }"> 
                <td th:text="${ pay.empAndDept.empName  }"></td>
                <td th:text="${ pay.salBase }"></td>
                <td th:text="${ pay.salTotalMinus }"></td>
                <td th:text="${ pay.salRealAmount }"></td>
                <td><button type="button" class="select btn" th:onclick="'location.href = \'' + @{/empPay/oneEmpPay/{salNo}(salNo=${pay.salNo})} + '\''">확인</button></td>
              </tr>
             </tbody>
            </table>
            <br><br>
            <div id="newEmpDiv">
         	 <button type="button" class="insert btn newbtn">등록</button>
          </div> 
          <div th:replace="/manage/empPay/empPaypaging.html"></div>
        </div>
        <script>

 	$('.newbtn').click(function(){
		location.href='/empPay/empPayInsert';
	}); 
	const insertSuccessmessage = "[[${insertSuccessMessage}]]" 
	
	if(insertSuccessmessage){
		Swal.fire({
            icon: 'success',
            title: 'Success!',
            text: '등록이 성공적으로 완료되었습니다!',
        })
	}
	</script> 
	</body>
</html>